{"metadata":{"modules":{"imports":[],"exports":{"exported":[],"specifiers":[]}},"usedHelpers":[]},"ignored":false,"code":"/*\n  DO NOT MODIFY - This file has been generated and will be regenerated\n  Semantic UI v2.1.6\n*/\n/*!\n * # Semantic UI - Visibility\n * http://github.com/semantic-org/semantic-ui/\n *\n *\n * Copyright 2015 Contributors\n * Released under the MIT license\n * http://opensource.org/licenses/MIT\n *\n */\n\n;(function ($, window, document, undefined) {\n\n  \"use strict\";\n\n  $.fn.visibility = function (parameters) {\n    var $allModules = $(this),\n        moduleSelector = $allModules.selector || '',\n        time = new Date().getTime(),\n        performance = [],\n        query = arguments[0],\n        methodInvoked = typeof query == 'string',\n        queryArguments = [].slice.call(arguments, 1),\n        returnedValue;\n\n    $allModules.each(function () {\n      var settings = $.isPlainObject(parameters) ? $.extend(true, {}, $.fn.visibility.settings, parameters) : $.extend({}, $.fn.visibility.settings),\n          className = settings.className,\n          namespace = settings.namespace,\n          error = settings.error,\n          metadata = settings.metadata,\n          eventNamespace = '.' + namespace,\n          moduleNamespace = 'module-' + namespace,\n          $window = $(window),\n          $module = $(this),\n          $context = $(settings.context),\n          $placeholder,\n          selector = $module.selector || '',\n          instance = $module.data(moduleNamespace),\n          requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame || function (callback) {\n        setTimeout(callback, 0);\n      },\n          element = this,\n          disabled = false,\n          observer,\n          module;\n\n      module = {\n\n        initialize: function () {\n          module.debug('Initializing', settings);\n\n          module.setup.cache();\n\n          if (module.should.trackChanges()) {\n\n            if (settings.type == 'image') {\n              module.setup.image();\n            }\n            if (settings.type == 'fixed') {\n              module.setup.fixed();\n            }\n\n            if (settings.observeChanges) {\n              module.observeChanges();\n            }\n            module.bind.events();\n          }\n\n          module.save.position();\n          if (!module.is.visible()) {\n            module.error(error.visible, $module);\n          }\n\n          if (settings.initialCheck) {\n            module.checkVisibility();\n          }\n          module.instantiate();\n        },\n\n        instantiate: function () {\n          module.debug('Storing instance', module);\n          $module.data(moduleNamespace, module);\n          instance = module;\n        },\n\n        destroy: function () {\n          module.verbose('Destroying previous module');\n          if (observer) {\n            observer.disconnect();\n          }\n          $window.off('load' + eventNamespace, module.event.load).off('resize' + eventNamespace, module.event.resize);\n          $context.off('scrollchange' + eventNamespace, module.event.scrollchange);\n          $module.off(eventNamespace).removeData(moduleNamespace);\n        },\n\n        observeChanges: function () {\n          if ('MutationObserver' in window) {\n            observer = new MutationObserver(function (mutations) {\n              module.verbose('DOM tree modified, updating visibility calculations');\n              module.timer = setTimeout(function () {\n                module.verbose('DOM tree modified, updating sticky menu');\n                module.refresh();\n              }, 100);\n            });\n            observer.observe(element, {\n              childList: true,\n              subtree: true\n            });\n            module.debug('Setting up mutation observer', observer);\n          }\n        },\n\n        bind: {\n          events: function () {\n            module.verbose('Binding visibility events to scroll and resize');\n            if (settings.refreshOnLoad) {\n              $window.on('load' + eventNamespace, module.event.load);\n            }\n            $window.on('resize' + eventNamespace, module.event.resize);\n            // pub/sub pattern\n            $context.off('scroll' + eventNamespace).on('scroll' + eventNamespace, module.event.scroll).on('scrollchange' + eventNamespace, module.event.scrollchange);\n          }\n        },\n\n        event: {\n          resize: function () {\n            module.debug('Window resized');\n            if (settings.refreshOnResize) {\n              requestAnimationFrame(module.refresh);\n            }\n          },\n          load: function () {\n            module.debug('Page finished loading');\n            requestAnimationFrame(module.refresh);\n          },\n          // publishes scrollchange event on one scroll\n          scroll: function () {\n            if (settings.throttle) {\n              clearTimeout(module.timer);\n              module.timer = setTimeout(function () {\n                $context.triggerHandler('scrollchange' + eventNamespace, [$context.scrollTop()]);\n              }, settings.throttle);\n            } else {\n              requestAnimationFrame(function () {\n                $context.triggerHandler('scrollchange' + eventNamespace, [$context.scrollTop()]);\n              });\n            }\n          },\n          // subscribes to scrollchange\n          scrollchange: function (event, scrollPosition) {\n            module.checkVisibility(scrollPosition);\n          }\n        },\n\n        precache: function (images, callback) {\n          if (!(images instanceof Array)) {\n            images = [images];\n          }\n          var imagesLength = images.length,\n              loadedCounter = 0,\n              cache = [],\n              cacheImage = document.createElement('img'),\n              handleLoad = function () {\n            loadedCounter++;\n            if (loadedCounter >= images.length) {\n              if ($.isFunction(callback)) {\n                callback();\n              }\n            }\n          };\n          while (imagesLength--) {\n            cacheImage = document.createElement('img');\n            cacheImage.onload = handleLoad;\n            cacheImage.onerror = handleLoad;\n            cacheImage.src = images[imagesLength];\n            cache.push(cacheImage);\n          }\n        },\n\n        enableCallbacks: function () {\n          module.debug('Allowing callbacks to occur');\n          disabled = false;\n        },\n\n        disableCallbacks: function () {\n          module.debug('Disabling all callbacks temporarily');\n          disabled = true;\n        },\n\n        should: {\n          trackChanges: function () {\n            if (methodInvoked) {\n              module.debug('One time query, no need to bind events');\n              return false;\n            }\n            module.debug('Callbacks being attached');\n            return true;\n          }\n        },\n\n        setup: {\n          cache: function () {\n            module.cache = {\n              occurred: {},\n              screen: {},\n              element: {}\n            };\n          },\n          image: function () {\n            var src = $module.data(metadata.src);\n            if (src) {\n              module.verbose('Lazy loading image', src);\n              settings.once = true;\n              settings.observeChanges = false;\n\n              // show when top visible\n              settings.onOnScreen = function () {\n                module.debug('Image on screen', element);\n                module.precache(src, function () {\n                  module.set.image(src);\n                });\n              };\n            }\n          },\n          fixed: function () {\n            module.debug('Setting up fixed');\n            settings.once = false;\n            settings.observeChanges = false;\n            settings.initialCheck = true;\n            settings.refreshOnLoad = true;\n            if (!parameters.transition) {\n              settings.transition = false;\n            }\n            module.create.placeholder();\n            module.debug('Added placeholder', $placeholder);\n            settings.onTopPassed = function () {\n              module.debug('Element passed, adding fixed position', $module);\n              module.show.placeholder();\n              module.set.fixed();\n              if (settings.transition) {\n                if ($.fn.transition !== undefined) {\n                  $module.transition(settings.transition, settings.duration);\n                }\n              }\n            };\n            settings.onTopPassedReverse = function () {\n              module.debug('Element returned to position, removing fixed', $module);\n              module.hide.placeholder();\n              module.remove.fixed();\n            };\n          }\n        },\n\n        create: {\n          placeholder: function () {\n            module.verbose('Creating fixed position placeholder');\n            $placeholder = $module.clone(false).css('display', 'none').addClass(className.placeholder).insertAfter($module);\n          }\n        },\n\n        show: {\n          placeholder: function () {\n            module.verbose('Showing placeholder');\n            $placeholder.css('display', 'block').css('visibility', 'hidden');\n          }\n        },\n        hide: {\n          placeholder: function () {\n            module.verbose('Hiding placeholder');\n            $placeholder.css('display', 'none').css('visibility', '');\n          }\n        },\n\n        set: {\n          fixed: function () {\n            module.verbose('Setting element to fixed position');\n            $module.addClass(className.fixed).css({\n              position: 'fixed',\n              top: settings.offset + 'px',\n              left: 'auto',\n              zIndex: '1'\n            });\n          },\n          image: function (src) {\n            $module.attr('src', src);\n            if (settings.transition) {\n              if ($.fn.transition !== undefined) {\n                $module.transition(settings.transition, settings.duration);\n              } else {\n                $module.fadeIn(settings.duration);\n              }\n            } else {\n              $module.show();\n            }\n          }\n        },\n\n        is: {\n          onScreen: function () {\n            var calculations = module.get.elementCalculations();\n            return calculations.onScreen;\n          },\n          offScreen: function () {\n            var calculations = module.get.elementCalculations();\n            return calculations.offScreen;\n          },\n          visible: function () {\n            if (module.cache && module.cache.element) {\n              return !(module.cache.element.width === 0 && module.cache.element.offset.top === 0);\n            }\n            return false;\n          }\n        },\n\n        refresh: function () {\n          module.debug('Refreshing constants (width/height)');\n          if (settings.type == 'fixed') {\n            module.remove.fixed();\n            module.remove.occurred();\n          }\n          module.reset();\n          module.save.position();\n          if (settings.checkOnRefresh) {\n            module.checkVisibility();\n          }\n          settings.onRefresh.call(element);\n        },\n\n        reset: function () {\n          module.verbose('Reseting all cached values');\n          if ($.isPlainObject(module.cache)) {\n            module.cache.screen = {};\n            module.cache.element = {};\n          }\n        },\n\n        checkVisibility: function (scroll) {\n          module.verbose('Checking visibility of element', module.cache.element);\n\n          if (!disabled && module.is.visible()) {\n\n            // save scroll position\n            module.save.scroll(scroll);\n\n            // update calculations derived from scroll\n            module.save.calculations();\n\n            // percentage\n            module.passed();\n\n            // reverse (must be first)\n            module.passingReverse();\n            module.topVisibleReverse();\n            module.bottomVisibleReverse();\n            module.topPassedReverse();\n            module.bottomPassedReverse();\n\n            // one time\n            module.onScreen();\n            module.offScreen();\n            module.passing();\n            module.topVisible();\n            module.bottomVisible();\n            module.topPassed();\n            module.bottomPassed();\n\n            // on update callback\n            if (settings.onUpdate) {\n              settings.onUpdate.call(element, module.get.elementCalculations());\n            }\n          }\n        },\n\n        passed: function (amount, newCallback) {\n          var calculations = module.get.elementCalculations(),\n              amountInPixels;\n          // assign callback\n          if (amount && newCallback) {\n            settings.onPassed[amount] = newCallback;\n          } else if (amount !== undefined) {\n            return module.get.pixelsPassed(amount) > calculations.pixelsPassed;\n          } else if (calculations.passing) {\n            $.each(settings.onPassed, function (amount, callback) {\n              if (calculations.bottomVisible || calculations.pixelsPassed > module.get.pixelsPassed(amount)) {\n                module.execute(callback, amount);\n              } else if (!settings.once) {\n                module.remove.occurred(callback);\n              }\n            });\n          }\n        },\n\n        onScreen: function (newCallback) {\n          var calculations = module.get.elementCalculations(),\n              callback = newCallback || settings.onOnScreen,\n              callbackName = 'onScreen';\n          if (newCallback) {\n            module.debug('Adding callback for onScreen', newCallback);\n            settings.onOnScreen = newCallback;\n          }\n          if (calculations.onScreen) {\n            module.execute(callback, callbackName);\n          } else if (!settings.once) {\n            module.remove.occurred(callbackName);\n          }\n          if (newCallback !== undefined) {\n            return calculations.onOnScreen;\n          }\n        },\n\n        offScreen: function (newCallback) {\n          var calculations = module.get.elementCalculations(),\n              callback = newCallback || settings.onOffScreen,\n              callbackName = 'offScreen';\n          if (newCallback) {\n            module.debug('Adding callback for offScreen', newCallback);\n            settings.onOffScreen = newCallback;\n          }\n          if (calculations.offScreen) {\n            module.execute(callback, callbackName);\n          } else if (!settings.once) {\n            module.remove.occurred(callbackName);\n          }\n          if (newCallback !== undefined) {\n            return calculations.onOffScreen;\n          }\n        },\n\n        passing: function (newCallback) {\n          var calculations = module.get.elementCalculations(),\n              callback = newCallback || settings.onPassing,\n              callbackName = 'passing';\n          if (newCallback) {\n            module.debug('Adding callback for passing', newCallback);\n            settings.onPassing = newCallback;\n          }\n          if (calculations.passing) {\n            module.execute(callback, callbackName);\n          } else if (!settings.once) {\n            module.remove.occurred(callbackName);\n          }\n          if (newCallback !== undefined) {\n            return calculations.passing;\n          }\n        },\n\n        topVisible: function (newCallback) {\n          var calculations = module.get.elementCalculations(),\n              callback = newCallback || settings.onTopVisible,\n              callbackName = 'topVisible';\n          if (newCallback) {\n            module.debug('Adding callback for top visible', newCallback);\n            settings.onTopVisible = newCallback;\n          }\n          if (calculations.topVisible) {\n            module.execute(callback, callbackName);\n          } else if (!settings.once) {\n            module.remove.occurred(callbackName);\n          }\n          if (newCallback === undefined) {\n            return calculations.topVisible;\n          }\n        },\n\n        bottomVisible: function (newCallback) {\n          var calculations = module.get.elementCalculations(),\n              callback = newCallback || settings.onBottomVisible,\n              callbackName = 'bottomVisible';\n          if (newCallback) {\n            module.debug('Adding callback for bottom visible', newCallback);\n            settings.onBottomVisible = newCallback;\n          }\n          if (calculations.bottomVisible) {\n            module.execute(callback, callbackName);\n          } else if (!settings.once) {\n            module.remove.occurred(callbackName);\n          }\n          if (newCallback === undefined) {\n            return calculations.bottomVisible;\n          }\n        },\n\n        topPassed: function (newCallback) {\n          var calculations = module.get.elementCalculations(),\n              callback = newCallback || settings.onTopPassed,\n              callbackName = 'topPassed';\n          if (newCallback) {\n            module.debug('Adding callback for top passed', newCallback);\n            settings.onTopPassed = newCallback;\n          }\n          if (calculations.topPassed) {\n            module.execute(callback, callbackName);\n          } else if (!settings.once) {\n            module.remove.occurred(callbackName);\n          }\n          if (newCallback === undefined) {\n            return calculations.topPassed;\n          }\n        },\n\n        bottomPassed: function (newCallback) {\n          var calculations = module.get.elementCalculations(),\n              callback = newCallback || settings.onBottomPassed,\n              callbackName = 'bottomPassed';\n          if (newCallback) {\n            module.debug('Adding callback for bottom passed', newCallback);\n            settings.onBottomPassed = newCallback;\n          }\n          if (calculations.bottomPassed) {\n            module.execute(callback, callbackName);\n          } else if (!settings.once) {\n            module.remove.occurred(callbackName);\n          }\n          if (newCallback === undefined) {\n            return calculations.bottomPassed;\n          }\n        },\n\n        passingReverse: function (newCallback) {\n          var calculations = module.get.elementCalculations(),\n              callback = newCallback || settings.onPassingReverse,\n              callbackName = 'passingReverse';\n          if (newCallback) {\n            module.debug('Adding callback for passing reverse', newCallback);\n            settings.onPassingReverse = newCallback;\n          }\n          if (!calculations.passing) {\n            if (module.get.occurred('passing')) {\n              module.execute(callback, callbackName);\n            }\n          } else if (!settings.once) {\n            module.remove.occurred(callbackName);\n          }\n          if (newCallback !== undefined) {\n            return !calculations.passing;\n          }\n        },\n\n        topVisibleReverse: function (newCallback) {\n          var calculations = module.get.elementCalculations(),\n              callback = newCallback || settings.onTopVisibleReverse,\n              callbackName = 'topVisibleReverse';\n          if (newCallback) {\n            module.debug('Adding callback for top visible reverse', newCallback);\n            settings.onTopVisibleReverse = newCallback;\n          }\n          if (!calculations.topVisible) {\n            if (module.get.occurred('topVisible')) {\n              module.execute(callback, callbackName);\n            }\n          } else if (!settings.once) {\n            module.remove.occurred(callbackName);\n          }\n          if (newCallback === undefined) {\n            return !calculations.topVisible;\n          }\n        },\n\n        bottomVisibleReverse: function (newCallback) {\n          var calculations = module.get.elementCalculations(),\n              callback = newCallback || settings.onBottomVisibleReverse,\n              callbackName = 'bottomVisibleReverse';\n          if (newCallback) {\n            module.debug('Adding callback for bottom visible reverse', newCallback);\n            settings.onBottomVisibleReverse = newCallback;\n          }\n          if (!calculations.bottomVisible) {\n            if (module.get.occurred('bottomVisible')) {\n              module.execute(callback, callbackName);\n            }\n          } else if (!settings.once) {\n            module.remove.occurred(callbackName);\n          }\n          if (newCallback === undefined) {\n            return !calculations.bottomVisible;\n          }\n        },\n\n        topPassedReverse: function (newCallback) {\n          var calculations = module.get.elementCalculations(),\n              callback = newCallback || settings.onTopPassedReverse,\n              callbackName = 'topPassedReverse';\n          if (newCallback) {\n            module.debug('Adding callback for top passed reverse', newCallback);\n            settings.onTopPassedReverse = newCallback;\n          }\n          if (!calculations.topPassed) {\n            if (module.get.occurred('topPassed')) {\n              module.execute(callback, callbackName);\n            }\n          } else if (!settings.once) {\n            module.remove.occurred(callbackName);\n          }\n          if (newCallback === undefined) {\n            return !calculations.onTopPassed;\n          }\n        },\n\n        bottomPassedReverse: function (newCallback) {\n          var calculations = module.get.elementCalculations(),\n              callback = newCallback || settings.onBottomPassedReverse,\n              callbackName = 'bottomPassedReverse';\n          if (newCallback) {\n            module.debug('Adding callback for bottom passed reverse', newCallback);\n            settings.onBottomPassedReverse = newCallback;\n          }\n          if (!calculations.bottomPassed) {\n            if (module.get.occurred('bottomPassed')) {\n              module.execute(callback, callbackName);\n            }\n          } else if (!settings.once) {\n            module.remove.occurred(callbackName);\n          }\n          if (newCallback === undefined) {\n            return !calculations.bottomPassed;\n          }\n        },\n\n        execute: function (callback, callbackName) {\n          var calculations = module.get.elementCalculations(),\n              screen = module.get.screenCalculations();\n          callback = callback || false;\n          if (callback) {\n            if (settings.continuous) {\n              module.debug('Callback being called continuously', callbackName, calculations);\n              callback.call(element, calculations, screen);\n            } else if (!module.get.occurred(callbackName)) {\n              module.debug('Conditions met', callbackName, calculations);\n              callback.call(element, calculations, screen);\n            }\n          }\n          module.save.occurred(callbackName);\n        },\n\n        remove: {\n          fixed: function () {\n            module.debug('Removing fixed position');\n            $module.removeClass(className.fixed).css({\n              position: '',\n              top: '',\n              left: '',\n              zIndex: ''\n            });\n          },\n          occurred: function (callback) {\n            if (callback) {\n              var occurred = module.cache.occurred;\n              if (occurred[callback] !== undefined && occurred[callback] === true) {\n                module.debug('Callback can now be called again', callback);\n                module.cache.occurred[callback] = false;\n              }\n            } else {\n              module.cache.occurred = {};\n            }\n          }\n        },\n\n        save: {\n          calculations: function () {\n            module.verbose('Saving all calculations necessary to determine positioning');\n            module.save.direction();\n            module.save.screenCalculations();\n            module.save.elementCalculations();\n          },\n          occurred: function (callback) {\n            if (callback) {\n              if (module.cache.occurred[callback] === undefined || module.cache.occurred[callback] !== true) {\n                module.verbose('Saving callback occurred', callback);\n                module.cache.occurred[callback] = true;\n              }\n            }\n          },\n          scroll: function (scrollPosition) {\n            scrollPosition = scrollPosition + settings.offset || $context.scrollTop() + settings.offset;\n            module.cache.scroll = scrollPosition;\n          },\n          direction: function () {\n            var scroll = module.get.scroll(),\n                lastScroll = module.get.lastScroll(),\n                direction;\n            if (scroll > lastScroll && lastScroll) {\n              direction = 'down';\n            } else if (scroll < lastScroll && lastScroll) {\n              direction = 'up';\n            } else {\n              direction = 'static';\n            }\n            module.cache.direction = direction;\n            return module.cache.direction;\n          },\n          elementPosition: function () {\n            var element = module.cache.element,\n                screen = module.get.screenSize();\n            module.verbose('Saving element position');\n            // (quicker than $.extend)\n            element.fits = element.height < screen.height;\n            element.offset = $module.offset();\n            element.width = $module.outerWidth();\n            element.height = $module.outerHeight();\n            // store\n            module.cache.element = element;\n            return element;\n          },\n          elementCalculations: function () {\n            var screen = module.get.screenCalculations(),\n                element = module.get.elementPosition();\n            // offset\n            if (settings.includeMargin) {\n              element.margin = {};\n              element.margin.top = parseInt($module.css('margin-top'), 10);\n              element.margin.bottom = parseInt($module.css('margin-bottom'), 10);\n              element.top = element.offset.top - element.margin.top;\n              element.bottom = element.offset.top + element.height + element.margin.bottom;\n            } else {\n              element.top = element.offset.top;\n              element.bottom = element.offset.top + element.height;\n            }\n\n            // visibility\n            element.topVisible = screen.bottom >= element.top;\n            element.topPassed = screen.top >= element.top;\n            element.bottomVisible = screen.bottom >= element.bottom;\n            element.bottomPassed = screen.top >= element.bottom;\n            element.pixelsPassed = 0;\n            element.percentagePassed = 0;\n\n            // meta calculations\n            element.onScreen = element.topVisible && !element.bottomPassed;\n            element.passing = element.topPassed && !element.bottomPassed;\n            element.offScreen = !element.onScreen;\n\n            // passing calculations\n            if (element.passing) {\n              element.pixelsPassed = screen.top - element.top;\n              element.percentagePassed = (screen.top - element.top) / element.height;\n            }\n            module.cache.element = element;\n            module.verbose('Updated element calculations', element);\n            return element;\n          },\n          screenCalculations: function () {\n            var scroll = module.get.scroll();\n            module.save.direction();\n            module.cache.screen.top = scroll;\n            module.cache.screen.bottom = scroll + module.cache.screen.height;\n            return module.cache.screen;\n          },\n          screenSize: function () {\n            module.verbose('Saving window position');\n            module.cache.screen = {\n              height: $context.height()\n            };\n          },\n          position: function () {\n            module.save.screenSize();\n            module.save.elementPosition();\n          }\n        },\n\n        get: {\n          pixelsPassed: function (amount) {\n            var element = module.get.elementCalculations();\n            if (amount.search('%') > -1) {\n              return element.height * (parseInt(amount, 10) / 100);\n            }\n            return parseInt(amount, 10);\n          },\n          occurred: function (callback) {\n            return module.cache.occurred !== undefined ? module.cache.occurred[callback] || false : false;\n          },\n          direction: function () {\n            if (module.cache.direction === undefined) {\n              module.save.direction();\n            }\n            return module.cache.direction;\n          },\n          elementPosition: function () {\n            if (module.cache.element === undefined) {\n              module.save.elementPosition();\n            }\n            return module.cache.element;\n          },\n          elementCalculations: function () {\n            if (module.cache.element === undefined) {\n              module.save.elementCalculations();\n            }\n            return module.cache.element;\n          },\n          screenCalculations: function () {\n            if (module.cache.screen === undefined) {\n              module.save.screenCalculations();\n            }\n            return module.cache.screen;\n          },\n          screenSize: function () {\n            if (module.cache.screen === undefined) {\n              module.save.screenSize();\n            }\n            return module.cache.screen;\n          },\n          scroll: function () {\n            if (module.cache.scroll === undefined) {\n              module.save.scroll();\n            }\n            return module.cache.scroll;\n          },\n          lastScroll: function () {\n            if (module.cache.screen === undefined) {\n              module.debug('First scroll event, no last scroll could be found');\n              return false;\n            }\n            return module.cache.screen.top;\n          }\n        },\n\n        setting: function (name, value) {\n          if ($.isPlainObject(name)) {\n            $.extend(true, settings, name);\n          } else if (value !== undefined) {\n            settings[name] = value;\n          } else {\n            return settings[name];\n          }\n        },\n        internal: function (name, value) {\n          if ($.isPlainObject(name)) {\n            $.extend(true, module, name);\n          } else if (value !== undefined) {\n            module[name] = value;\n          } else {\n            return module[name];\n          }\n        },\n        debug: function () {\n          if (settings.debug) {\n            if (settings.performance) {\n              module.performance.log(arguments);\n            } else {\n              module.debug = Function.prototype.bind.call(console.info, console, settings.name + ':');\n              module.debug.apply(console, arguments);\n            }\n          }\n        },\n        verbose: function () {\n          if (settings.verbose && settings.debug) {\n            if (settings.performance) {\n              module.performance.log(arguments);\n            } else {\n              module.verbose = Function.prototype.bind.call(console.info, console, settings.name + ':');\n              module.verbose.apply(console, arguments);\n            }\n          }\n        },\n        error: function () {\n          module.error = Function.prototype.bind.call(console.error, console, settings.name + ':');\n          module.error.apply(console, arguments);\n        },\n        performance: {\n          log: function (message) {\n            var currentTime, executionTime, previousTime;\n            if (settings.performance) {\n              currentTime = new Date().getTime();\n              previousTime = time || currentTime;\n              executionTime = currentTime - previousTime;\n              time = currentTime;\n              performance.push({\n                'Name': message[0],\n                'Arguments': [].slice.call(message, 1) || '',\n                'Element': element,\n                'Execution Time': executionTime\n              });\n            }\n            clearTimeout(module.performance.timer);\n            module.performance.timer = setTimeout(module.performance.display, 500);\n          },\n          display: function () {\n            var title = settings.name + ':',\n                totalTime = 0;\n            time = false;\n            clearTimeout(module.performance.timer);\n            $.each(performance, function (index, data) {\n              totalTime += data['Execution Time'];\n            });\n            title += ' ' + totalTime + 'ms';\n            if (moduleSelector) {\n              title += ' \\'' + moduleSelector + '\\'';\n            }\n            if ((console.group !== undefined || console.table !== undefined) && performance.length > 0) {\n              console.groupCollapsed(title);\n              if (console.table) {\n                console.table(performance);\n              } else {\n                $.each(performance, function (index, data) {\n                  console.log(data['Name'] + ': ' + data['Execution Time'] + 'ms');\n                });\n              }\n              console.groupEnd();\n            }\n            performance = [];\n          }\n        },\n        invoke: function (query, passedArguments, context) {\n          var object = instance,\n              maxDepth,\n              found,\n              response;\n          passedArguments = passedArguments || queryArguments;\n          context = element || context;\n          if (typeof query == 'string' && object !== undefined) {\n            query = query.split(/[\\. ]/);\n            maxDepth = query.length - 1;\n            $.each(query, function (depth, value) {\n              var camelCaseValue = depth != maxDepth ? value + query[depth + 1].charAt(0).toUpperCase() + query[depth + 1].slice(1) : query;\n              if ($.isPlainObject(object[camelCaseValue]) && depth != maxDepth) {\n                object = object[camelCaseValue];\n              } else if (object[camelCaseValue] !== undefined) {\n                found = object[camelCaseValue];\n                return false;\n              } else if ($.isPlainObject(object[value]) && depth != maxDepth) {\n                object = object[value];\n              } else if (object[value] !== undefined) {\n                found = object[value];\n                return false;\n              } else {\n                module.error(error.method, query);\n                return false;\n              }\n            });\n          }\n          if ($.isFunction(found)) {\n            response = found.apply(context, passedArguments);\n          } else if (found !== undefined) {\n            response = found;\n          }\n          if ($.isArray(returnedValue)) {\n            returnedValue.push(response);\n          } else if (returnedValue !== undefined) {\n            returnedValue = [returnedValue, response];\n          } else if (response !== undefined) {\n            returnedValue = response;\n          }\n          return found;\n        }\n      };\n\n      if (methodInvoked) {\n        if (instance === undefined) {\n          module.initialize();\n        }\n        instance.save.scroll();\n        instance.save.calculations();\n        module.invoke(query);\n      } else {\n        if (instance !== undefined) {\n          instance.invoke('destroy');\n        }\n        module.initialize();\n      }\n    });\n\n    return returnedValue !== undefined ? returnedValue : this;\n  };\n\n  $.fn.visibility.settings = {\n\n    name: 'Visibility',\n    namespace: 'visibility',\n\n    debug: false,\n    verbose: false,\n    performance: true,\n\n    // whether to use mutation observers to follow changes\n    observeChanges: true,\n\n    // check position immediately on init\n    initialCheck: true,\n\n    // whether to refresh calculations after all page images load\n    refreshOnLoad: true,\n\n    // whether to refresh calculations after page resize event\n    refreshOnResize: true,\n\n    // should call callbacks on refresh event (resize, etc)\n    checkOnRefresh: true,\n\n    // callback should only occur one time\n    once: true,\n\n    // callback should fire continuously whe evaluates to true\n    continuous: false,\n\n    // offset to use with scroll top\n    offset: 0,\n\n    // whether to include margin in elements position\n    includeMargin: false,\n\n    // scroll context for visibility checks\n    context: window,\n\n    // visibility check delay in ms (defaults to animationFrame)\n    throttle: false,\n\n    // special visibility type (image, fixed)\n    type: false,\n\n    // image only animation settings\n    transition: 'fade in',\n    duration: 1000,\n\n    // array of callbacks for percentage\n    onPassed: {},\n\n    // standard callbacks\n    onOnScreen: false,\n    onOffScreen: false,\n    onPassing: false,\n    onTopVisible: false,\n    onBottomVisible: false,\n    onTopPassed: false,\n    onBottomPassed: false,\n\n    // reverse callbacks\n    onPassingReverse: false,\n    onTopVisibleReverse: false,\n    onBottomVisibleReverse: false,\n    onTopPassedReverse: false,\n    onBottomPassedReverse: false,\n\n    // utility callbacks\n    onUpdate: false, // disabled by default for performance\n    onRefresh: function () {},\n\n    metadata: {\n      src: 'src'\n    },\n\n    className: {\n      fixed: 'fixed',\n      placeholder: 'placeholder'\n    },\n\n    error: {\n      method: 'The method you called is not defined.',\n      visible: 'Element is hidden, you must call refresh after element becomes visible'\n    }\n\n  };\n})(jQuery, window, document);","ast":null,"map":{"version":3,"sources":["/client/definitions/behaviors/visibility.js"],"names":[],"mappings":"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","file":"/client/definitions/behaviors/visibility.js.map","sourcesContent":["/*\n  DO NOT MODIFY - This file has been generated and will be regenerated\n  Semantic UI v2.1.6\n*/\n/*!\n * # Semantic UI - Visibility\n * http://github.com/semantic-org/semantic-ui/\n *\n *\n * Copyright 2015 Contributors\n * Released under the MIT license\n * http://opensource.org/licenses/MIT\n *\n */\n\n;(function ( $, window, document, undefined ) {\n\n\"use strict\";\n\n$.fn.visibility = function(parameters) {\n  var\n    $allModules    = $(this),\n    moduleSelector = $allModules.selector || '',\n\n    time           = new Date().getTime(),\n    performance    = [],\n\n    query          = arguments[0],\n    methodInvoked  = (typeof query == 'string'),\n    queryArguments = [].slice.call(arguments, 1),\n    returnedValue\n  ;\n\n  $allModules\n    .each(function() {\n      var\n        settings        = ( $.isPlainObject(parameters) )\n          ? $.extend(true, {}, $.fn.visibility.settings, parameters)\n          : $.extend({}, $.fn.visibility.settings),\n\n        className       = settings.className,\n        namespace       = settings.namespace,\n        error           = settings.error,\n        metadata        = settings.metadata,\n\n        eventNamespace  = '.' + namespace,\n        moduleNamespace = 'module-' + namespace,\n\n        $window         = $(window),\n\n        $module         = $(this),\n        $context        = $(settings.context),\n\n        $placeholder,\n\n        selector        = $module.selector || '',\n        instance        = $module.data(moduleNamespace),\n\n        requestAnimationFrame = window.requestAnimationFrame\n          || window.mozRequestAnimationFrame\n          || window.webkitRequestAnimationFrame\n          || window.msRequestAnimationFrame\n          || function(callback) { setTimeout(callback, 0); },\n\n        element         = this,\n        disabled        = false,\n\n        observer,\n        module\n      ;\n\n      module = {\n\n        initialize: function() {\n          module.debug('Initializing', settings);\n\n          module.setup.cache();\n\n          if( module.should.trackChanges() ) {\n\n            if(settings.type == 'image') {\n              module.setup.image();\n            }\n            if(settings.type == 'fixed') {\n              module.setup.fixed();\n            }\n\n            if(settings.observeChanges) {\n              module.observeChanges();\n            }\n            module.bind.events();\n          }\n\n          module.save.position();\n          if( !module.is.visible() ) {\n            module.error(error.visible, $module);\n          }\n\n          if(settings.initialCheck) {\n            module.checkVisibility();\n          }\n          module.instantiate();\n        },\n\n        instantiate: function() {\n          module.debug('Storing instance', module);\n          $module\n            .data(moduleNamespace, module)\n          ;\n          instance = module;\n        },\n\n        destroy: function() {\n          module.verbose('Destroying previous module');\n          if(observer) {\n            observer.disconnect();\n          }\n          $window\n            .off('load'   + eventNamespace, module.event.load)\n            .off('resize' + eventNamespace, module.event.resize)\n          ;\n          $context\n            .off('scrollchange' + eventNamespace, module.event.scrollchange)\n          ;\n          $module\n            .off(eventNamespace)\n            .removeData(moduleNamespace)\n          ;\n        },\n\n        observeChanges: function() {\n          if('MutationObserver' in window) {\n            observer = new MutationObserver(function(mutations) {\n              module.verbose('DOM tree modified, updating visibility calculations');\n              module.timer = setTimeout(function() {\n                module.verbose('DOM tree modified, updating sticky menu');\n                module.refresh();\n              }, 100);\n            });\n            observer.observe(element, {\n              childList : true,\n              subtree   : true\n            });\n            module.debug('Setting up mutation observer', observer);\n          }\n        },\n\n        bind: {\n          events: function() {\n            module.verbose('Binding visibility events to scroll and resize');\n            if(settings.refreshOnLoad) {\n              $window\n                .on('load'   + eventNamespace, module.event.load)\n              ;\n            }\n            $window\n              .on('resize' + eventNamespace, module.event.resize)\n            ;\n            // pub/sub pattern\n            $context\n              .off('scroll'      + eventNamespace)\n              .on('scroll'       + eventNamespace, module.event.scroll)\n              .on('scrollchange' + eventNamespace, module.event.scrollchange)\n            ;\n          }\n        },\n\n        event: {\n          resize: function() {\n            module.debug('Window resized');\n            if(settings.refreshOnResize) {\n              requestAnimationFrame(module.refresh);\n            }\n          },\n          load: function() {\n            module.debug('Page finished loading');\n            requestAnimationFrame(module.refresh);\n          },\n          // publishes scrollchange event on one scroll\n          scroll: function() {\n            if(settings.throttle) {\n              clearTimeout(module.timer);\n              module.timer = setTimeout(function() {\n                $context.triggerHandler('scrollchange' + eventNamespace, [ $context.scrollTop() ]);\n              }, settings.throttle);\n            }\n            else {\n              requestAnimationFrame(function() {\n                $context.triggerHandler('scrollchange' + eventNamespace, [ $context.scrollTop() ]);\n              });\n            }\n          },\n          // subscribes to scrollchange\n          scrollchange: function(event, scrollPosition) {\n            module.checkVisibility(scrollPosition);\n          },\n        },\n\n        precache: function(images, callback) {\n          if (!(images instanceof Array)) {\n            images = [images];\n          }\n          var\n            imagesLength  = images.length,\n            loadedCounter = 0,\n            cache         = [],\n            cacheImage    = document.createElement('img'),\n            handleLoad    = function() {\n              loadedCounter++;\n              if (loadedCounter >= images.length) {\n                if ($.isFunction(callback)) {\n                  callback();\n                }\n              }\n            }\n          ;\n          while (imagesLength--) {\n            cacheImage         = document.createElement('img');\n            cacheImage.onload  = handleLoad;\n            cacheImage.onerror = handleLoad;\n            cacheImage.src     = images[imagesLength];\n            cache.push(cacheImage);\n          }\n        },\n\n        enableCallbacks: function() {\n          module.debug('Allowing callbacks to occur');\n          disabled = false;\n        },\n\n        disableCallbacks: function() {\n          module.debug('Disabling all callbacks temporarily');\n          disabled = true;\n        },\n\n        should: {\n          trackChanges: function() {\n            if(methodInvoked) {\n              module.debug('One time query, no need to bind events');\n              return false;\n            }\n            module.debug('Callbacks being attached');\n            return true;\n          }\n        },\n\n        setup: {\n          cache: function() {\n            module.cache = {\n              occurred : {},\n              screen   : {},\n              element  : {},\n            };\n          },\n          image: function() {\n            var\n              src = $module.data(metadata.src)\n            ;\n            if(src) {\n              module.verbose('Lazy loading image', src);\n              settings.once           = true;\n              settings.observeChanges = false;\n\n              // show when top visible\n              settings.onOnScreen = function() {\n                module.debug('Image on screen', element);\n                module.precache(src, function() {\n                  module.set.image(src);\n                });\n              };\n            }\n          },\n          fixed: function() {\n            module.debug('Setting up fixed');\n            settings.once           = false;\n            settings.observeChanges = false;\n            settings.initialCheck   = true;\n            settings.refreshOnLoad  = true;\n            if(!parameters.transition) {\n              settings.transition = false;\n            }\n            module.create.placeholder();\n            module.debug('Added placeholder', $placeholder);\n            settings.onTopPassed = function() {\n              module.debug('Element passed, adding fixed position', $module);\n              module.show.placeholder();\n              module.set.fixed();\n              if(settings.transition) {\n                if($.fn.transition !== undefined) {\n                  $module.transition(settings.transition, settings.duration);\n                }\n              }\n            };\n            settings.onTopPassedReverse = function() {\n              module.debug('Element returned to position, removing fixed', $module);\n              module.hide.placeholder();\n              module.remove.fixed();\n            };\n          }\n        },\n\n        create: {\n          placeholder: function() {\n            module.verbose('Creating fixed position placeholder');\n            $placeholder = $module\n              .clone(false)\n              .css('display', 'none')\n              .addClass(className.placeholder)\n              .insertAfter($module)\n            ;\n          }\n        },\n\n        show: {\n          placeholder: function() {\n            module.verbose('Showing placeholder');\n            $placeholder\n              .css('display', 'block')\n              .css('visibility', 'hidden')\n            ;\n          }\n        },\n        hide: {\n          placeholder: function() {\n            module.verbose('Hiding placeholder');\n            $placeholder\n              .css('display', 'none')\n              .css('visibility', '')\n            ;\n          }\n        },\n\n        set: {\n          fixed: function() {\n            module.verbose('Setting element to fixed position');\n            $module\n              .addClass(className.fixed)\n              .css({\n                position : 'fixed',\n                top      : settings.offset + 'px',\n                left     : 'auto',\n                zIndex   : '1'\n              })\n            ;\n          },\n          image: function(src) {\n            $module\n              .attr('src', src)\n            ;\n            if(settings.transition) {\n              if( $.fn.transition !== undefined ) {\n                $module.transition(settings.transition, settings.duration);\n              }\n              else {\n                $module.fadeIn(settings.duration);\n              }\n            }\n            else {\n              $module.show();\n            }\n          }\n        },\n\n        is: {\n          onScreen: function() {\n            var\n              calculations   = module.get.elementCalculations()\n            ;\n            return calculations.onScreen;\n          },\n          offScreen: function() {\n            var\n              calculations   = module.get.elementCalculations()\n            ;\n            return calculations.offScreen;\n          },\n          visible: function() {\n            if(module.cache && module.cache.element) {\n              return !(module.cache.element.width === 0 && module.cache.element.offset.top === 0);\n            }\n            return false;\n          }\n        },\n\n        refresh: function() {\n          module.debug('Refreshing constants (width/height)');\n          if(settings.type == 'fixed') {\n            module.remove.fixed();\n            module.remove.occurred();\n          }\n          module.reset();\n          module.save.position();\n          if(settings.checkOnRefresh) {\n            module.checkVisibility();\n          }\n          settings.onRefresh.call(element);\n        },\n\n        reset: function() {\n          module.verbose('Reseting all cached values');\n          if( $.isPlainObject(module.cache) ) {\n            module.cache.screen = {};\n            module.cache.element = {};\n          }\n        },\n\n        checkVisibility: function(scroll) {\n          module.verbose('Checking visibility of element', module.cache.element);\n\n          if( !disabled && module.is.visible() ) {\n\n            // save scroll position\n            module.save.scroll(scroll);\n\n            // update calculations derived from scroll\n            module.save.calculations();\n\n            // percentage\n            module.passed();\n\n            // reverse (must be first)\n            module.passingReverse();\n            module.topVisibleReverse();\n            module.bottomVisibleReverse();\n            module.topPassedReverse();\n            module.bottomPassedReverse();\n\n            // one time\n            module.onScreen();\n            module.offScreen();\n            module.passing();\n            module.topVisible();\n            module.bottomVisible();\n            module.topPassed();\n            module.bottomPassed();\n\n            // on update callback\n            if(settings.onUpdate) {\n              settings.onUpdate.call(element, module.get.elementCalculations());\n            }\n          }\n        },\n\n        passed: function(amount, newCallback) {\n          var\n            calculations   = module.get.elementCalculations(),\n            amountInPixels\n          ;\n          // assign callback\n          if(amount && newCallback) {\n            settings.onPassed[amount] = newCallback;\n          }\n          else if(amount !== undefined) {\n            return (module.get.pixelsPassed(amount) > calculations.pixelsPassed);\n          }\n          else if(calculations.passing) {\n            $.each(settings.onPassed, function(amount, callback) {\n              if(calculations.bottomVisible || calculations.pixelsPassed > module.get.pixelsPassed(amount)) {\n                module.execute(callback, amount);\n              }\n              else if(!settings.once) {\n                module.remove.occurred(callback);\n              }\n            });\n          }\n        },\n\n        onScreen: function(newCallback) {\n          var\n            calculations = module.get.elementCalculations(),\n            callback     = newCallback || settings.onOnScreen,\n            callbackName = 'onScreen'\n          ;\n          if(newCallback) {\n            module.debug('Adding callback for onScreen', newCallback);\n            settings.onOnScreen = newCallback;\n          }\n          if(calculations.onScreen) {\n            module.execute(callback, callbackName);\n          }\n          else if(!settings.once) {\n            module.remove.occurred(callbackName);\n          }\n          if(newCallback !== undefined) {\n            return calculations.onOnScreen;\n          }\n        },\n\n        offScreen: function(newCallback) {\n          var\n            calculations = module.get.elementCalculations(),\n            callback     = newCallback || settings.onOffScreen,\n            callbackName = 'offScreen'\n          ;\n          if(newCallback) {\n            module.debug('Adding callback for offScreen', newCallback);\n            settings.onOffScreen = newCallback;\n          }\n          if(calculations.offScreen) {\n            module.execute(callback, callbackName);\n          }\n          else if(!settings.once) {\n            module.remove.occurred(callbackName);\n          }\n          if(newCallback !== undefined) {\n            return calculations.onOffScreen;\n          }\n        },\n\n        passing: function(newCallback) {\n          var\n            calculations = module.get.elementCalculations(),\n            callback     = newCallback || settings.onPassing,\n            callbackName = 'passing'\n          ;\n          if(newCallback) {\n            module.debug('Adding callback for passing', newCallback);\n            settings.onPassing = newCallback;\n          }\n          if(calculations.passing) {\n            module.execute(callback, callbackName);\n          }\n          else if(!settings.once) {\n            module.remove.occurred(callbackName);\n          }\n          if(newCallback !== undefined) {\n            return calculations.passing;\n          }\n        },\n\n\n        topVisible: function(newCallback) {\n          var\n            calculations = module.get.elementCalculations(),\n            callback     = newCallback || settings.onTopVisible,\n            callbackName = 'topVisible'\n          ;\n          if(newCallback) {\n            module.debug('Adding callback for top visible', newCallback);\n            settings.onTopVisible = newCallback;\n          }\n          if(calculations.topVisible) {\n            module.execute(callback, callbackName);\n          }\n          else if(!settings.once) {\n            module.remove.occurred(callbackName);\n          }\n          if(newCallback === undefined) {\n            return calculations.topVisible;\n          }\n        },\n\n        bottomVisible: function(newCallback) {\n          var\n            calculations = module.get.elementCalculations(),\n            callback     = newCallback || settings.onBottomVisible,\n            callbackName = 'bottomVisible'\n          ;\n          if(newCallback) {\n            module.debug('Adding callback for bottom visible', newCallback);\n            settings.onBottomVisible = newCallback;\n          }\n          if(calculations.bottomVisible) {\n            module.execute(callback, callbackName);\n          }\n          else if(!settings.once) {\n            module.remove.occurred(callbackName);\n          }\n          if(newCallback === undefined) {\n            return calculations.bottomVisible;\n          }\n        },\n\n        topPassed: function(newCallback) {\n          var\n            calculations = module.get.elementCalculations(),\n            callback     = newCallback || settings.onTopPassed,\n            callbackName = 'topPassed'\n          ;\n          if(newCallback) {\n            module.debug('Adding callback for top passed', newCallback);\n            settings.onTopPassed = newCallback;\n          }\n          if(calculations.topPassed) {\n            module.execute(callback, callbackName);\n          }\n          else if(!settings.once) {\n            module.remove.occurred(callbackName);\n          }\n          if(newCallback === undefined) {\n            return calculations.topPassed;\n          }\n        },\n\n        bottomPassed: function(newCallback) {\n          var\n            calculations = module.get.elementCalculations(),\n            callback     = newCallback || settings.onBottomPassed,\n            callbackName = 'bottomPassed'\n          ;\n          if(newCallback) {\n            module.debug('Adding callback for bottom passed', newCallback);\n            settings.onBottomPassed = newCallback;\n          }\n          if(calculations.bottomPassed) {\n            module.execute(callback, callbackName);\n          }\n          else if(!settings.once) {\n            module.remove.occurred(callbackName);\n          }\n          if(newCallback === undefined) {\n            return calculations.bottomPassed;\n          }\n        },\n\n        passingReverse: function(newCallback) {\n          var\n            calculations = module.get.elementCalculations(),\n            callback     = newCallback || settings.onPassingReverse,\n            callbackName = 'passingReverse'\n          ;\n          if(newCallback) {\n            module.debug('Adding callback for passing reverse', newCallback);\n            settings.onPassingReverse = newCallback;\n          }\n          if(!calculations.passing) {\n            if(module.get.occurred('passing')) {\n              module.execute(callback, callbackName);\n            }\n          }\n          else if(!settings.once) {\n            module.remove.occurred(callbackName);\n          }\n          if(newCallback !== undefined) {\n            return !calculations.passing;\n          }\n        },\n\n\n        topVisibleReverse: function(newCallback) {\n          var\n            calculations = module.get.elementCalculations(),\n            callback     = newCallback || settings.onTopVisibleReverse,\n            callbackName = 'topVisibleReverse'\n          ;\n          if(newCallback) {\n            module.debug('Adding callback for top visible reverse', newCallback);\n            settings.onTopVisibleReverse = newCallback;\n          }\n          if(!calculations.topVisible) {\n            if(module.get.occurred('topVisible')) {\n              module.execute(callback, callbackName);\n            }\n          }\n          else if(!settings.once) {\n            module.remove.occurred(callbackName);\n          }\n          if(newCallback === undefined) {\n            return !calculations.topVisible;\n          }\n        },\n\n        bottomVisibleReverse: function(newCallback) {\n          var\n            calculations = module.get.elementCalculations(),\n            callback     = newCallback || settings.onBottomVisibleReverse,\n            callbackName = 'bottomVisibleReverse'\n          ;\n          if(newCallback) {\n            module.debug('Adding callback for bottom visible reverse', newCallback);\n            settings.onBottomVisibleReverse = newCallback;\n          }\n          if(!calculations.bottomVisible) {\n            if(module.get.occurred('bottomVisible')) {\n              module.execute(callback, callbackName);\n            }\n          }\n          else if(!settings.once) {\n            module.remove.occurred(callbackName);\n          }\n          if(newCallback === undefined) {\n            return !calculations.bottomVisible;\n          }\n        },\n\n        topPassedReverse: function(newCallback) {\n          var\n            calculations = module.get.elementCalculations(),\n            callback     = newCallback || settings.onTopPassedReverse,\n            callbackName = 'topPassedReverse'\n          ;\n          if(newCallback) {\n            module.debug('Adding callback for top passed reverse', newCallback);\n            settings.onTopPassedReverse = newCallback;\n          }\n          if(!calculations.topPassed) {\n            if(module.get.occurred('topPassed')) {\n              module.execute(callback, callbackName);\n            }\n          }\n          else if(!settings.once) {\n            module.remove.occurred(callbackName);\n          }\n          if(newCallback === undefined) {\n            return !calculations.onTopPassed;\n          }\n        },\n\n        bottomPassedReverse: function(newCallback) {\n          var\n            calculations = module.get.elementCalculations(),\n            callback     = newCallback || settings.onBottomPassedReverse,\n            callbackName = 'bottomPassedReverse'\n          ;\n          if(newCallback) {\n            module.debug('Adding callback for bottom passed reverse', newCallback);\n            settings.onBottomPassedReverse = newCallback;\n          }\n          if(!calculations.bottomPassed) {\n            if(module.get.occurred('bottomPassed')) {\n              module.execute(callback, callbackName);\n            }\n          }\n          else if(!settings.once) {\n            module.remove.occurred(callbackName);\n          }\n          if(newCallback === undefined) {\n            return !calculations.bottomPassed;\n          }\n        },\n\n        execute: function(callback, callbackName) {\n          var\n            calculations = module.get.elementCalculations(),\n            screen       = module.get.screenCalculations()\n          ;\n          callback = callback || false;\n          if(callback) {\n            if(settings.continuous) {\n              module.debug('Callback being called continuously', callbackName, calculations);\n              callback.call(element, calculations, screen);\n            }\n            else if(!module.get.occurred(callbackName)) {\n              module.debug('Conditions met', callbackName, calculations);\n              callback.call(element, calculations, screen);\n            }\n          }\n          module.save.occurred(callbackName);\n        },\n\n        remove: {\n          fixed: function() {\n            module.debug('Removing fixed position');\n            $module\n              .removeClass(className.fixed)\n              .css({\n                position : '',\n                top      : '',\n                left     : '',\n                zIndex   : ''\n              })\n            ;\n          },\n          occurred: function(callback) {\n            if(callback) {\n              var\n                occurred = module.cache.occurred\n              ;\n              if(occurred[callback] !== undefined && occurred[callback] === true) {\n                module.debug('Callback can now be called again', callback);\n                module.cache.occurred[callback] = false;\n              }\n            }\n            else {\n              module.cache.occurred = {};\n            }\n          }\n        },\n\n        save: {\n          calculations: function() {\n            module.verbose('Saving all calculations necessary to determine positioning');\n            module.save.direction();\n            module.save.screenCalculations();\n            module.save.elementCalculations();\n          },\n          occurred: function(callback) {\n            if(callback) {\n              if(module.cache.occurred[callback] === undefined || (module.cache.occurred[callback] !== true)) {\n                module.verbose('Saving callback occurred', callback);\n                module.cache.occurred[callback] = true;\n              }\n            }\n          },\n          scroll: function(scrollPosition) {\n            scrollPosition      = scrollPosition + settings.offset || $context.scrollTop() + settings.offset;\n            module.cache.scroll = scrollPosition;\n          },\n          direction: function() {\n            var\n              scroll     = module.get.scroll(),\n              lastScroll = module.get.lastScroll(),\n              direction\n            ;\n            if(scroll > lastScroll && lastScroll) {\n              direction = 'down';\n            }\n            else if(scroll < lastScroll && lastScroll) {\n              direction = 'up';\n            }\n            else {\n              direction = 'static';\n            }\n            module.cache.direction = direction;\n            return module.cache.direction;\n          },\n          elementPosition: function() {\n            var\n              element = module.cache.element,\n              screen  = module.get.screenSize()\n            ;\n            module.verbose('Saving element position');\n            // (quicker than $.extend)\n            element.fits          = (element.height < screen.height);\n            element.offset        = $module.offset();\n            element.width         = $module.outerWidth();\n            element.height        = $module.outerHeight();\n            // store\n            module.cache.element = element;\n            return element;\n          },\n          elementCalculations: function() {\n            var\n              screen     = module.get.screenCalculations(),\n              element    = module.get.elementPosition()\n            ;\n            // offset\n            if(settings.includeMargin) {\n              element.margin        = {};\n              element.margin.top    = parseInt($module.css('margin-top'), 10);\n              element.margin.bottom = parseInt($module.css('margin-bottom'), 10);\n              element.top    = element.offset.top - element.margin.top;\n              element.bottom = element.offset.top + element.height + element.margin.bottom;\n            }\n            else {\n              element.top    = element.offset.top;\n              element.bottom = element.offset.top + element.height;\n            }\n\n            // visibility\n            element.topVisible       = (screen.bottom >= element.top);\n            element.topPassed        = (screen.top >= element.top);\n            element.bottomVisible    = (screen.bottom >= element.bottom);\n            element.bottomPassed     = (screen.top >= element.bottom);\n            element.pixelsPassed     = 0;\n            element.percentagePassed = 0;\n\n            // meta calculations\n            element.onScreen  = (element.topVisible && !element.bottomPassed);\n            element.passing   = (element.topPassed && !element.bottomPassed);\n            element.offScreen = (!element.onScreen);\n\n            // passing calculations\n            if(element.passing) {\n              element.pixelsPassed     = (screen.top - element.top);\n              element.percentagePassed = (screen.top - element.top) / element.height;\n            }\n            module.cache.element = element;\n            module.verbose('Updated element calculations', element);\n            return element;\n          },\n          screenCalculations: function() {\n            var\n              scroll = module.get.scroll()\n            ;\n            module.save.direction();\n            module.cache.screen.top    = scroll;\n            module.cache.screen.bottom = scroll + module.cache.screen.height;\n            return module.cache.screen;\n          },\n          screenSize: function() {\n            module.verbose('Saving window position');\n            module.cache.screen = {\n              height: $context.height()\n            };\n          },\n          position: function() {\n            module.save.screenSize();\n            module.save.elementPosition();\n          }\n        },\n\n        get: {\n          pixelsPassed: function(amount) {\n            var\n              element = module.get.elementCalculations()\n            ;\n            if(amount.search('%') > -1) {\n              return ( element.height * (parseInt(amount, 10) / 100) );\n            }\n            return parseInt(amount, 10);\n          },\n          occurred: function(callback) {\n            return (module.cache.occurred !== undefined)\n              ? module.cache.occurred[callback] || false\n              : false\n            ;\n          },\n          direction: function() {\n            if(module.cache.direction === undefined) {\n              module.save.direction();\n            }\n            return module.cache.direction;\n          },\n          elementPosition: function() {\n            if(module.cache.element === undefined) {\n              module.save.elementPosition();\n            }\n            return module.cache.element;\n          },\n          elementCalculations: function() {\n            if(module.cache.element === undefined) {\n              module.save.elementCalculations();\n            }\n            return module.cache.element;\n          },\n          screenCalculations: function() {\n            if(module.cache.screen === undefined) {\n              module.save.screenCalculations();\n            }\n            return module.cache.screen;\n          },\n          screenSize: function() {\n            if(module.cache.screen === undefined) {\n              module.save.screenSize();\n            }\n            return module.cache.screen;\n          },\n          scroll: function() {\n            if(module.cache.scroll === undefined) {\n              module.save.scroll();\n            }\n            return module.cache.scroll;\n          },\n          lastScroll: function() {\n            if(module.cache.screen === undefined) {\n              module.debug('First scroll event, no last scroll could be found');\n              return false;\n            }\n            return module.cache.screen.top;\n          }\n        },\n\n        setting: function(name, value) {\n          if( $.isPlainObject(name) ) {\n            $.extend(true, settings, name);\n          }\n          else if(value !== undefined) {\n            settings[name] = value;\n          }\n          else {\n            return settings[name];\n          }\n        },\n        internal: function(name, value) {\n          if( $.isPlainObject(name) ) {\n            $.extend(true, module, name);\n          }\n          else if(value !== undefined) {\n            module[name] = value;\n          }\n          else {\n            return module[name];\n          }\n        },\n        debug: function() {\n          if(settings.debug) {\n            if(settings.performance) {\n              module.performance.log(arguments);\n            }\n            else {\n              module.debug = Function.prototype.bind.call(console.info, console, settings.name + ':');\n              module.debug.apply(console, arguments);\n            }\n          }\n        },\n        verbose: function() {\n          if(settings.verbose && settings.debug) {\n            if(settings.performance) {\n              module.performance.log(arguments);\n            }\n            else {\n              module.verbose = Function.prototype.bind.call(console.info, console, settings.name + ':');\n              module.verbose.apply(console, arguments);\n            }\n          }\n        },\n        error: function() {\n          module.error = Function.prototype.bind.call(console.error, console, settings.name + ':');\n          module.error.apply(console, arguments);\n        },\n        performance: {\n          log: function(message) {\n            var\n              currentTime,\n              executionTime,\n              previousTime\n            ;\n            if(settings.performance) {\n              currentTime   = new Date().getTime();\n              previousTime  = time || currentTime;\n              executionTime = currentTime - previousTime;\n              time          = currentTime;\n              performance.push({\n                'Name'           : message[0],\n                'Arguments'      : [].slice.call(message, 1) || '',\n                'Element'        : element,\n                'Execution Time' : executionTime\n              });\n            }\n            clearTimeout(module.performance.timer);\n            module.performance.timer = setTimeout(module.performance.display, 500);\n          },\n          display: function() {\n            var\n              title = settings.name + ':',\n              totalTime = 0\n            ;\n            time = false;\n            clearTimeout(module.performance.timer);\n            $.each(performance, function(index, data) {\n              totalTime += data['Execution Time'];\n            });\n            title += ' ' + totalTime + 'ms';\n            if(moduleSelector) {\n              title += ' \\'' + moduleSelector + '\\'';\n            }\n            if( (console.group !== undefined || console.table !== undefined) && performance.length > 0) {\n              console.groupCollapsed(title);\n              if(console.table) {\n                console.table(performance);\n              }\n              else {\n                $.each(performance, function(index, data) {\n                  console.log(data['Name'] + ': ' + data['Execution Time']+'ms');\n                });\n              }\n              console.groupEnd();\n            }\n            performance = [];\n          }\n        },\n        invoke: function(query, passedArguments, context) {\n          var\n            object = instance,\n            maxDepth,\n            found,\n            response\n          ;\n          passedArguments = passedArguments || queryArguments;\n          context         = element         || context;\n          if(typeof query == 'string' && object !== undefined) {\n            query    = query.split(/[\\. ]/);\n            maxDepth = query.length - 1;\n            $.each(query, function(depth, value) {\n              var camelCaseValue = (depth != maxDepth)\n                ? value + query[depth + 1].charAt(0).toUpperCase() + query[depth + 1].slice(1)\n                : query\n              ;\n              if( $.isPlainObject( object[camelCaseValue] ) && (depth != maxDepth) ) {\n                object = object[camelCaseValue];\n              }\n              else if( object[camelCaseValue] !== undefined ) {\n                found = object[camelCaseValue];\n                return false;\n              }\n              else if( $.isPlainObject( object[value] ) && (depth != maxDepth) ) {\n                object = object[value];\n              }\n              else if( object[value] !== undefined ) {\n                found = object[value];\n                return false;\n              }\n              else {\n                module.error(error.method, query);\n                return false;\n              }\n            });\n          }\n          if ( $.isFunction( found ) ) {\n            response = found.apply(context, passedArguments);\n          }\n          else if(found !== undefined) {\n            response = found;\n          }\n          if($.isArray(returnedValue)) {\n            returnedValue.push(response);\n          }\n          else if(returnedValue !== undefined) {\n            returnedValue = [returnedValue, response];\n          }\n          else if(response !== undefined) {\n            returnedValue = response;\n          }\n          return found;\n        }\n      };\n\n      if(methodInvoked) {\n        if(instance === undefined) {\n          module.initialize();\n        }\n        instance.save.scroll();\n        instance.save.calculations();\n        module.invoke(query);\n      }\n      else {\n        if(instance !== undefined) {\n          instance.invoke('destroy');\n        }\n        module.initialize();\n      }\n    })\n  ;\n\n  return (returnedValue !== undefined)\n    ? returnedValue\n    : this\n  ;\n};\n\n$.fn.visibility.settings = {\n\n  name                   : 'Visibility',\n  namespace              : 'visibility',\n\n  debug                  : false,\n  verbose                : false,\n  performance            : true,\n\n  // whether to use mutation observers to follow changes\n  observeChanges         : true,\n\n  // check position immediately on init\n  initialCheck           : true,\n\n  // whether to refresh calculations after all page images load\n  refreshOnLoad          : true,\n\n  // whether to refresh calculations after page resize event\n  refreshOnResize        : true,\n\n  // should call callbacks on refresh event (resize, etc)\n  checkOnRefresh         : true,\n\n  // callback should only occur one time\n  once                   : true,\n\n  // callback should fire continuously whe evaluates to true\n  continuous             : false,\n\n  // offset to use with scroll top\n  offset                 : 0,\n\n  // whether to include margin in elements position\n  includeMargin          : false,\n\n  // scroll context for visibility checks\n  context                : window,\n\n  // visibility check delay in ms (defaults to animationFrame)\n  throttle               : false,\n\n  // special visibility type (image, fixed)\n  type                   : false,\n\n  // image only animation settings\n  transition             : 'fade in',\n  duration               : 1000,\n\n  // array of callbacks for percentage\n  onPassed               : {},\n\n  // standard callbacks\n  onOnScreen             : false,\n  onOffScreen            : false,\n  onPassing              : false,\n  onTopVisible           : false,\n  onBottomVisible        : false,\n  onTopPassed            : false,\n  onBottomPassed         : false,\n\n  // reverse callbacks\n  onPassingReverse       : false,\n  onTopVisibleReverse    : false,\n  onBottomVisibleReverse : false,\n  onTopPassedReverse     : false,\n  onBottomPassedReverse  : false,\n\n  // utility callbacks\n  onUpdate               : false, // disabled by default for performance\n  onRefresh              : function(){},\n\n  metadata : {\n    src: 'src'\n  },\n\n  className: {\n    fixed       : 'fixed',\n    placeholder : 'placeholder'\n  },\n\n  error : {\n    method  : 'The method you called is not defined.',\n    visible : 'Element is hidden, you must call refresh after element becomes visible'\n  }\n\n};\n\n})( jQuery, window, document );"]},"hash":"d469121e96bb5bd6774da80e91643a01d70e07e7"}
